---
title: Vim
date: 2022-04-17 14:42:23
tags: tools
categories: tools
---

Vim使用教程

<!--more-->

# 常用指令

- 保存并退出

  ```
  :wq
  ```

- 移动到文件第一行、最后一行、第n行

  ```
  gg
  G
  nG
  ```

- 移动到当前屏幕第一行、最后一行、中间一行

  ```
  H
  L
  M
  ```

- 移动到行首、行尾

  ```
  0或home
  $或end
  ```

- 翻页

  ```
  # 下翻一页
  ^f
  # 上翻一页
  ^b
  # 下移半页
  ^d
  # 上移半页
  ^u
  ```

- 移动到下一个单词

  ```
  w
  # 往前移动到词首
  b
  # 往后移动到词尾
  e
  ```

- 删除

  ```
  # 删除整行
  dd
  # 向后删除一个字符
  x
  # 向前删除一个字符
  X
  ```

- 复制整行

  ```
  yy
  ```

- 粘贴

  ```
  # 粘贴在下一行
  p
  # 粘贴在上一行
  P
  ```

- 撤销与重做

  ```
  u
  ^r
  ```

- 插入

  ```
  # 在光标的下一行插入新行
  o
  # 在光标的上一行插入新行
  O
  ```

- 查找

  ```
  # 在当前光标向下查找word
  /word
  # 在当前光标向上查找word
  ?word
  ```

  

# art of Vim

- 编程时的操作：大量时间用于阅读/编辑代码，而不是写代码
- Vim被设置为**多模态编辑器**，对于插入文字和操纵文字有不同的模式
- Vim是可编程的，Vim的接口本身也是一个程序语言，键入操作是命令，命令是可组合的
- Vim**避免了使用鼠标**，**避免了使用上下左右方向键**，因此极限速度更快

# 多种操作模式

- Vim的设计以大多数时间都花在阅读、浏览和进行少量编辑改动为基础

- 具有多种操作模式

  正常模式：文件中四处移动光标进行修改

  插入模式：插入文本

  替换模式：替换文本

  可视化模式：选中文本块

  命令模式：用于执行命令

- 不同模式下，同样的键有不同的含义

  如，x在插入模式下会插入字母x，在正常模式下会删除当前光标所在的字母，在可视模式下会删除选中文本块

- 默认情况下，在左下角显示当前模式。启动时，默认为正常模式

## 模式切换

- 从其他模式返回正常模式：Esc
- 正常模式下：按`i`进入插入模式，按`R`进入替换模式，按`v`进入可视（一般）模式，按`V`进入可视（行）模式，按`^V`进入可视（块）模式，按`:`进入命令模式
- 由于Vim中会大量使用Esc键，可以考虑将大小写键重定义为Esc键

# 基本操作

## 插入文本

- 按`i`进入插入模式即可插入文本，按Esc返回正常模式

## 缓存、标签页、窗口

- Vim维护一系列打开的文件，称为缓存
- 一个Vim包含一系列标签页，每个标签页包含一系列窗口，每个窗口显示一个缓存
- 缓存和窗口不是一一对应的，窗口只是视角。一个缓存可以在多个窗口打开，甚至在同一个标签页内的多个窗口打开同一个缓存。此功能可用于查看同一个文件的不同部分
- Vim默认打开一个标签页，这个标签也包含一个窗口

## 命令行

- 正常模式下键入`:`进入命令行模式，光标立刻跳到屏幕下方的命令行

- 命令行模式，常用于打开、保存、关闭文件，以及退出vim

- 命令行模式下的命令

  `:q`退出（关闭窗口）

  `:w`保存（写）

  `:wq`保存然后退出

  `:e {文件名}`打开要编辑的文件

  `:ls`显示已打开的缓存

  `:help {标题}`打开帮助文档

  - `:help :w`打开`:w`命令的帮助文档
  - `:help w`打开`w`移动的帮助文档

# Vim的接口

## 移动

- 正常模式下，用移动命令在缓存中导航

  基本移动：`hjkl`，左下上右移动

  词：`w`下一个词，`b`词初，`e`词尾

  行：`0`行初，`^`第一个非空字符串，`$`行尾

  屏幕：`H`屏幕首行，`M`屏幕中间，`L`屏幕底部

  翻页：`^u`上翻，`^d`下翻

  文件：`gg`文件头，`G`文件尾

  行数：`:{行数}<CR>`或者`{行数}G`，移动到某一行

  查找：`f{字符}`，`t{字符}`，`F{字符}`，`T{字符}`

  - 查找到/向前/向后在本行的字符

  搜索：`/{正则表达式}`

## 选择

- 进入不同的可视化模式

  可视化：`v`

  可视化行：`V`

  可视化块：`^v`

- 进入可视化模式后，结合移动命令进行选中

## 编辑

- `i`，进入插入模式

- `O`，在之上插入行（Normal模式）

- `o`，在之下插入行（Normal模式）

- `d{移动命令}`，删除移动命令

  `dw`删除词，`d$`删除到行尾，`d0`删除到行头，`dj`删除到上一行

- `c{移动命令}`，改变移动命令

  `cw`改变词

- `x`删除字符，等同于`dl`，删除右侧字符

- `s`替换字符，等同于`xi`，删除字符并切换到插入模式

- 可视化模式下，选中文本块后，`d`删除

- `u`，撤销

- `^`重做

- `y`复制

- `p`粘贴

## 计数

- `3w`向前移动三个词
- `5j`向下移动5行
- `7dw`删除7个词

## 修饰语

- 修饰语`i`表示内部，如`ci(`表示该变当前括号内的内容

# 自定义vim

- Vim由位于`~/.vimrc`的文件配置。通过修改设置文件可以自定义Vim

# 扩展Vim

- vim支持很多扩展插件，vim使用插件管理器管理插件，只需要创建`~/.vim/pack/vendor/start/`文件夹，并把插件放在该文件夹即可

